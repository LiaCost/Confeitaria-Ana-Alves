
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minhas Configura√ß√µes</title>

     <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/Logo/Logo-Black.png">

    <!-- CSS -->
    <link rel="stylesheet" href="assets/style/configuracoes.css"> 
</head>
<body>
     <button class="back-button" onclick="goBack()" title="Voltar √† tela inicial">
        <a href="index.html"><span class="back-arrow">‚Üê</span></a>       
    </button>
    <div class="container">
        <div class="header">         
            <h1>Minhas Configura√ß√µes</h1>
            <p>Personalize sua experi√™ncia conosco</p>
        </div>

        <div class="settings-content">
            <div id="notification" class="notification">
                Suas configura√ß√µes foram salvas com sucesso!
            </div>

            <div class="settings-section">
                <h2 class="section-title">
                     Dados Pessoais
                </h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">Nome</label>
                        <input type="text" id="firstName" class="form-control" placeholder="Seu nome">
                    </div>
                    <div class="form-group">
                        <label for="lastName">Sobrenome</label>
                        <input type="text" id="lastName" class="form-control" placeholder="Seu sobrenome">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="email">E-mail</label>
                        <input type="email" id="email" class="form-control" placeholder="seu@email.com">
                    </div>
                    <div class="form-group">
                        <label for="phone">Telefone</label>
                        <input type="tel" id="phone" class="form-control" placeholder="(11) 99999-9999">
                    </div>
                </div>

                <div class="form-group">
                    <label for="birthDate">Data de Nascimento</label>
                    <input type="date" id="birthDate" class="form-control">
                </div>
            </div>

            <div class="settings-section">
                <h2 class="section-title">
                    Endere√ßos de Entrega
                </h2>
                
                <div id="addresses-container">
                    <!-- Endere√ßos ser√£o renderizados aqui -->
                </div>

                <button class="btn btn-primary" onclick="showAddAddressModal()" style="margin-top: 15px;">+ Adicionar Novo Endere√ßo</button>
            </div>

            <div class="settings-section">
                <h2 class="section-title">
                    Notifica√ß√µes
                </h2>
                
                <div class="preference-card">
                    <div class="preference-info">
                        <h4>Promo√ß√µes e Ofertas</h4>
                        <p>Receba as melhores ofertas e novidades em primeira m√£o</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="preference-card">
                    <div class="preference-info">
                        <h4>Status do Pedido</h4>
                        <p>Atualiza√ß√µes sobre prepara√ß√£o e entrega dos seus pedidos</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="preference-card">
                    <div class="preference-info">
                        <h4>Lembrete de Anivers√°rio</h4>
                        <p>Oferta especial no seu anivers√°rio e datas comemorativas</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="preference-card">
                    <div class="preference-info">
                        <h4>Novos Produtos</h4>
                        <p>Seja o primeiro a saber sobre nossos lan√ßamentos</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div class="settings-section">
                <h2 class="section-title">
                    Prefer√™ncias Alimentares
                </h2>
                
                <div class="form-group">
                    <label>Restri√ß√µes Alimentares</label>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-top: 10px;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px 12px; background: var(--accent1); border-radius: 20px;">
                            <input type="checkbox"> Sem Gl√∫ten
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px 12px; background: var(--accent1); border-radius: 20px;">
                            <input type="checkbox"> Sem Lactose
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px 12px; background: var(--accent1); border-radius: 20px;">
                            <input type="checkbox"> Vegano
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px 12px; background: var(--accent1); border-radius: 20px;">
                            <input type="checkbox"> Sem A√ß√∫car
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px 12px; background: var(--accent1); border-radius: 20px;">
                            <input type="checkbox"> Diab√©tico
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="allergies">Alergias</label>
                    <input type="text" id="allergies" class="form-control" placeholder="Ex: amendoim, castanha, chocolate...">
                </div>
            </div>

            <div class="settings-section">
                <h2 class="section-title">
                    Meus Favoritos
                </h2>
                
                <div id="favorites-container">
                    <!-- Favoritos ser√£o renderizados aqui -->
                </div>

                <button class="btn btn-primary" onclick="showAddFavoriteModal()" style="margin-top: 15px;">+ Adicionar aos Favoritos</button>
            </div>

            <div class="settings-section">
                <h2 class="section-title">
                    Prefer√™ncias de Entrega
                </h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="prefTime">Hor√°rio Preferido</label>
                        <select id="prefTime" class="form-control">
                            <option>Manh√£ (8h - 12h)</option>
                            <option>Tarde (12h - 18h)</option>
                            <option>Noite (18h - 22h)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="deliveryNotes">Instru√ß√µes Especiais</label>
                        <input type="text" id="deliveryNotes" class="form-control" placeholder="Ex: Port√£o azul, apartamento 101...">
                    </div>
                </div>

                <div class="preference-card">
                    <div class="preference-info">
                        <h4>Entrega Sem Contato</h4>
                        <p>Deixar o pedido na porta sem contato direto</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div class="actions">
                <button class="btn btn-secondary" onclick="showResetConfirmModal()">Cancelar Altera√ß√µes</button>
                <button class="btn btn-primary" onclick="saveSettings()">Salvar Configura√ß√µes</button>
            </div>
        </div>
    </div>

    <!-- Modal de Edi√ß√£o/Adi√ß√£o de Endere√ßo -->
    <div id="address-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="address-modal-title">
                    <span id="address-modal-icon">üè†</span>
                    <span id="address-modal-text">Adicionar Endere√ßo</span>
                </h3>
                <button class="modal-close" onclick="closeModal('address-modal')">&times;</button>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <label for="address-name">Nome do Endere√ßo</label>
                    <input type="text" id="address-name" class="form-control" placeholder="Ex: Casa, Trabalho, Casa da Vov√≥...">
                </div>
                <div class="form-group">
                    <label for="address-street">Endere√ßo Completo</label>
                    <input type="text" id="address-street" class="form-control" placeholder="Rua, n√∫mero, complemento...">
                </div>
                <div class="form-group">
                    <label for="address-city">Cidade/Estado</label>
                    <input type="text" id="address-city" class="form-control" placeholder="S√£o Paulo, SP">
                </div>
                <div class="form-group">
                    <label for="address-cep">CEP</label>
                    <input type="text" id="address-cep" class="form-control" placeholder="00000-000">
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" onclick="closeModal('address-modal')">Cancelar</button>
                <button class="btn btn-confirm" id="address-save-btn" onclick="saveAddress()">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirma√ß√£o -->
    <div id="confirm-modal" class="modal-overlay">
        <div class="modal confirm-modal">
            <div class="modal-header">
                <h3 class="modal-title">Confirma√ß√£o</h3>
                <button class="modal-close" onclick="closeModal('confirm-modal')">&times;</button>
            </div>
            <div class="modal-content">
                <div class="confirm-icon" id="confirm-icon">‚ö†Ô∏è</div>
                <div class="confirm-message" id="confirm-message">
                    Tem certeza que deseja continuar?
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" onclick="closeModal('confirm-modal')">Cancelar</button>
                <button class="btn btn-danger" id="confirm-action-btn" onclick="executeConfirmAction()">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Adicionar Favorito -->
    <div id="favorite-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    Adicionar aos Favoritos
                </h3>
                <button class="modal-close" onclick="closeModal('favorite-modal')">&times;</button>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <label for="favorite-name">Nome do Produto</label>
                    <input type="text" id="favorite-name" class="form-control" placeholder="Ex: Cupcake de Chocolate">
                </div>
                <div class="form-group">
                    <label for="favorite-description">Descri√ß√£o</label>
                    <input type="text" id="favorite-description" class="form-control" placeholder="Ex: Com cobertura de brigadeiro">
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" onclick="closeModal('favorite-modal')">Cancelar</button>
                <button class="btn btn-confirm" onclick="saveFavorite()">Adicionar</button>
            </div>
        </div>
    </div>

    <script>
        // Dados de exemplo para endere√ßos
        let addresses = [
            { id: 1, name: 'Casa', address: 'Rua das Flores, 123 - Jardim Primavera', city: 'S√£o Paulo, SP', cep: '01234-567', isDefault: true },
            { id: 2, name: 'Trabalho', address: 'Av. Paulista, 1000 - Bela Vista', city: 'S√£o Paulo, SP', cep: '01310-100', isDefault: false }
        ];

        // Dados de exemplo para favoritos
        let favorites = [
            { id: 1, name: 'Pudim', description: 'De leite condensado', icon: 'üçÆ' },
            { id: 2, name: 'Cupcake', description: 'Com cobertura de morango', icon: 'üßÅ' },
            { id: 3, name: 'Torta de Lim√£o', description: 'Com merengue su√≠√ßo', icon: 'ü•ß' }
        ];

        let currentEditingAddressId = null;
        let confirmAction = null;

        function saveSettings() {
            const notification = document.getElementById('notification');
            notification.classList.add('show');
            
            // Scroll suave para o topo
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Fun√ß√µes para modais
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
            // Limpar campos se for modal de endere√ßo
            if (modalId === 'address-modal') {
                document.getElementById('address-name').value = '';
                document.getElementById('address-street').value = '';
                document.getElementById('address-city').value = '';
                document.getElementById('address-cep').value = '';
                currentEditingAddressId = null;
            }
            // Limpar campos se for modal de favorito
            if (modalId === 'favorite-modal') {
                document.getElementById('favorite-name').value = '';
                document.getElementById('favorite-description').value = '';
            }
        }

        // Fun√ß√µes para gerenciar endere√ßos
        function editAddress(addressId) {
            const address = addresses.find(addr => addr.id === addressId);
            if (address) {
                const newName = prompt('Nome do endere√ßo:', address.name);
                const newAddress = prompt('Endere√ßo:', address.address);
                const newCity = prompt('Cidade/Estado:', address.city);
                const newCep = prompt('CEP:', address.cep);
                
                if (newName && newAddress && newCity && newCep) {
                    address.name = newName;
                    address.address = newAddress;
                    address.city = newCity;
                    address.cep = newCep;
                    renderAddresses();
                    showNotification('Endere√ßo atualizado com sucesso! ‚úèÔ∏è');
                }
            }
        }

        function removeAddress(addressId) {
            const address = addresses.find(addr => addr.id === addressId);
            if (address && address.isDefault) {
                alert('Voc√™ n√£o pode remover o endere√ßo principal. Defina outro endere√ßo como principal primeiro.');
                return;
            }
            
            if (confirm('Tem certeza que deseja remover este endere√ßo?')) {
                addresses = addresses.filter(addr => addr.id !== addressId);
                renderAddresses();
                showNotification('Endere√ßo removido com sucesso! üóëÔ∏è');
            }
        }

        function setDefaultAddress(addressId) {
            addresses.forEach(addr => addr.isDefault = false);
            const address = addresses.find(addr => addr.id === addressId);
            if (address) {
                address.isDefault = true;
                renderAddresses();
                showNotification('Endere√ßo principal alterado! ‚≠ê');
            }
        }

        function addNewAddress() {
            const name = prompt('Nome do endere√ßo (ex: Casa, Trabalho):');
            const address = prompt('Endere√ßo completo:');
            const city = prompt('Cidade/Estado:');
            const cep = prompt('CEP:');
            
            if (name && address && city && cep) {
                const newId = Math.max(...addresses.map(addr => addr.id)) + 1;
                addresses.push({
                    id: newId,
                    name: name,
                    address: address,
                    city: city,
                    cep: cep,
                    isDefault: false
                });
                renderAddresses();
                showNotification('Novo endere√ßo adicionado! üè†');
            }
        }

        function renderAddresses() {
            const addressSection = document.querySelector('.settings-section:nth-child(3)');
            const addressesHTML = addresses.map(addr => `
                <div class="address-card ${addr.isDefault ? 'default' : ''}">
                    ${addr.isDefault ? '<div class="badge">Principal</div>' : ''}
                    <h4>${addr.name}</h4>
                    <p>${addr.address}<br>${addr.city} - CEP: ${addr.cep}</p>
                    <div class="address-actions">
                        <button class="btn btn-secondary btn-small" onclick="editAddress(${addr.id})"> Editar</button>
                        ${!addr.isDefault ? `<button class="btn btn-secondary btn-small" onclick="setDefaultAddress(${addr.id})"> Tornar Principal</button>` : ''}
                        <button class="btn btn-secondary btn-small" onclick="removeAddress(${addr.id})">Remover</button>
                    </div>
                </div>
            `).join('');
            
            addressSection.innerHTML = `
                <h2 class="section-title"> Endere√ßos de Entrega</h2>
                ${addressesHTML}
                <button class="btn btn-primary" onclick="addNewAddress()" style="margin-top: 15px;">+ Adicionar Novo Endere√ßo</button>
            `;
        }

        // Fun√ß√µes para gerenciar favoritos
        function removeFavorite(favoriteId) {
            if (confirm('Remover este item dos favoritos?')) {
                favorites = favorites.filter(fav => fav.id !== favoriteId);
                renderFavorites();
                showNotification('Item removido dos favoritos! üíî');
            }
        }

        function addToFavorites() {
            const name = prompt('Nome do produto:');
            const description = prompt('Descri√ß√£o:');
            const icons = ['üßÅ', 'üç∞', 'ü•ß', 'üç™', 'üç©', 'üéÇ', 'ü•Æ', 'üßÜ'];
            const icon = icons[Math.floor(Math.random() * icons.length)];
            
            if (name && description) {
                const newId = Math.max(...favorites.map(fav => fav.id)) + 1;
                favorites.push({
                    id: newId,
                    name: name,
                    description: description,
                    icon: icon
                });
                renderFavorites();
                showNotification('Produto adicionado aos favoritos! ‚ù§Ô∏è');
            }
        }

        function renderFavorites() {
            const favoritesSection = document.querySelector('.settings-section:nth-child(6)');
            const favoritesHTML = favorites.map(fav => `
                <div class="favorite-item">
                    <div class="favorite-placeholder">${fav.icon}</div>
                    <div style="flex-grow: 1;">
                        <h4>${fav.name}</h4>
                        <p>${fav.description}</p>
                    </div>
                    <button class="btn btn-secondary btn-small" onclick="removeFavorite(${fav.id})" style="margin-left: 10px;">‚ùå</button>
                </div>
            `).join('');
            
            favoritesSection.innerHTML = `
                <h2 class="section-title"> Meus Favoritos</h2>
                ${favoritesHTML}
                <button class="btn btn-primary" onclick="addToFavorites()" style="margin-top: 15px;">+ Adicionar aos Favoritos</button>
            `;
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Fun√ß√£o para resetar configura√ß√µes
        function resetSettings() {
            if (confirm('Tem certeza que deseja restaurar todas as configura√ß√µes para os valores padr√£o? Esta a√ß√£o n√£o pode ser desfeita.')) {
                // Reset dos campos de dados pessoais
                document.getElementById('firstName').value = '';
                document.getElementById('lastName').value = '';
                document.getElementById('email').value = '';
                document.getElementById('phone').value = '';
                document.getElementById('birthDate').value = '';
                document.getElementById('allergies').value = '';
                document.getElementById('deliveryNotes').value = '';
                
                // Reset das prefer√™ncias
                document.getElementById('prefTime').selectedIndex = 1; // Tarde
                
                // Reset dos toggles
                const toggles = document.querySelectorAll('.preference-card input[type="checkbox"]');
                toggles.forEach((toggle, index) => {
                    if (index < 3) { // Primeiras 3 notifica√ß√µes
                        toggle.checked = true;
                    } else {
                        toggle.checked = false;
                    }
                });
                
                // Reset das restri√ß√µes alimentares
                document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    if (checkbox.closest('.preference-card')) return; // Pular os toggles de notifica√ß√£o
                    checkbox.checked = false;
                    const label = checkbox.closest('label');
                    if (label) {
                        label.style.background = 'var(--accent1)';
                        label.style.color = 'var(--darkest)';
                    }
                });
                
                // Reset endere√ßos para padr√£o
                addresses = [
                    { id: 1, name: 'Casa', address: 'Rua das Flores, 123 - Jardim Primavera', city: 'S√£o Paulo, SP', cep: '01234-567', isDefault: true },
                    { id: 2, name: 'Trabalho', address: 'Av. Paulista, 1000 - Bela Vista', city: 'S√£o Paulo, SP', cep: '01310-100', isDefault: false }
                ];
                
                // Reset favoritos para padr√£o
                favorites = [
                    { id: 1, name: 'Cupcake de Chocolate', description: 'Com cobertura de brigadeiro', icon: 'üßÅ' },
                    { id: 2, name: 'Bolo Red Velvet', description: 'Fatia individual com cream cheese', icon: 'üç∞' },
                    { id: 3, name: 'Torta de Lim√£o', description: 'Com merengue su√≠√ßo', icon: 'ü•ß' }
                ];
                
                renderAddresses();
                renderFavorites();
                showNotification('Configura√ß√µes restauradas para os valores padr√£o! üîÑ');
            }
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Renderizar endere√ßos e favoritos
            renderAddresses();
            renderFavorites();
            
            // Adicionar event listener para o bot√£o cancelar
            document.querySelector('.btn-secondary').addEventListener('click', resetSettings);
            
            // Anima√ß√µes interativas
            document.querySelectorAll('.preference-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    if (e.target.tagName === 'INPUT') return;
                    const toggle = this.querySelector('input[type="checkbox"]');
                    toggle.checked = !toggle.checked;
                });
            });

            document.querySelectorAll('.form-control').forEach(input => {
                input.addEventListener('focus', function() {
                    this.style.transform = 'scale(1.02)';
                });
                
                input.addEventListener('blur', function() {
                    this.style.transform = 'scale(1)';
                });
            });

            // Toggle para restri√ß√µes alimentares
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const label = this.closest('label');
                    if (label && !this.closest('.preference-card') && !this.closest('.toggle-switch')) {
                        if (this.checked) {
                            label.style.background = 'var(--secondary)';
                            label.style.color = 'var(--white)';
                        } else {
                            label.style.background = 'var(--accent1)';
                            label.style.color = 'var(--darkest)';
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>